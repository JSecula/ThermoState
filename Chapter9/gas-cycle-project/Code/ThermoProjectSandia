{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "                       SuperCriticalCO_2 through Brayton cycle                       \n",
      " \n",
      " \n",
      "                                     Jason Secula                                    \n",
      "                           Applied Thermodynamics [ME 2234]                          \n",
      "                               Professor Bryan W. Weber                              \n",
      "                             Project 2: Gas Power Cycles                             \n",
      "           \n",
      "(Qdot_in/mdot)    = 171.49648312041035 kilojoule / kilogram\n",
      "(Qdot_out/mdot)   = 41.59006103137252 kilojoule / kilogram\n",
      "WTurbine/mdot     = 126.87019637846936 kilojoule / kilogram\n",
      "WCompressors/mdot = 157.65177415864548 kilojoule / kilogram\n",
      "           \n",
      "BWR               = 124.26226068756992 percent\n",
      "(y)              = 4.9056413328752955 dimensionless\n",
      "(y-1)            = 3.9056413328752955 dimensionless\n",
      "           \n",
      "η_regen1= 85.55204066754716 percent\n",
      "η_regen2= 86.93135512252684 percent\n",
      "η_regen= 86.24169789503699 percent\n",
      "           \n",
      "TubrineWork    = 126.87019637846936 kilojoule / kilogram\n",
      "TotCompWork    = 130.79129676794923 kilojoule / kilogram\n",
      "Heat in        = 171.49648312041035 kilojoule / kilogram\n",
      "η             = 76.26471073235865 percent\n",
      "η_s           = 58.04567551284099 percent\n",
      "η_t Wt/Wt_s   = 62.61849401739028 percent\n",
      "η_t Wc/Wc_s   = 72.23706324824957 percent\n"
     ]
    }
   ],
   "source": [
    "from thermostate import State, Q_, units\n",
    "from math import pi\n",
    "#___________________________________\n",
    "import matplotlib.pyplot as plt\n",
    "import scipy.special as special\n",
    "import numpy as np\n",
    "#_____________________________________________________________________ Line\n",
    "print('SuperCriticalCO_2 through Brayton cycle'.center(85))\n",
    "print(' ')\n",
    "print(' ')\n",
    "print('Jason Secula'.center(85))\n",
    "print('Applied Thermodynamics [ME 2234]'.center(85))\n",
    "print('Professor Bryan W. Weber'.center(85))\n",
    "print('Project 2: Gas Power Cycles'.center(85))\n",
    "print('           ')\n",
    "\n",
    "substance = 'AIR' #R-744 for CO2 did not work...\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 1, Into Compressor 1._____________________\n",
    "#_____________________________________________________________________\n",
    "p_1 = Q_(7690, 'kPa')\n",
    "T_1 = Q_(305.15, 'K')\n",
    "h_1 = Q_(309.3829)\n",
    "st_1 = State(substance, T=T_1, p=p_1)\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 2, Into Regenerator 2.____________________\n",
    "#_____________________________________________________________________\n",
    "p_2 = Q_(20, 'MPa')\n",
    "T_2 = Q_(334.25, 'K')\n",
    "st_2 = State(substance, T=T_2, p=p_2)\n",
    "#___s_________________________________________________________________ Line\n",
    "#___s______State 2s, Into Regenerator 1. with irrevsibilities.________\n",
    "#___s_________________________________________________________________\n",
    "#Compressor is Isentropic: s_1 = s_2s\n",
    "st_2s = State(substance, p=p_2, s=st_1.s) #Compressor Irreversibilies.\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 3, Into Regenerator 1.____________________\n",
    "#_____________________________________________________________________\n",
    "p_3 = Q_(19.98868, 'MPa')\n",
    "T_3 = Q_(431.14, 'K')\n",
    "st_3 = State(substance, T=T_3, p=p_3)\n",
    "#___s_________________________________________________________________ Line\n",
    "#___s_________________State 3s, Into Regenerator 1.___________________\n",
    "#___s_________________________________________________________________\n",
    "st_3s = State(substance, s=st_1.s, p=p_3) #Compressor Irreversibilies.\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 4, Into Heat Exchanger._______[ Q_in ]____\n",
    "#_____________________________________________________________________\n",
    "p_4 = Q_(19.95795, 'MPa')\n",
    "T_4 = Q_(669.69, 'K')\n",
    "st_4 = State(substance, T=T_4, p=p_4) \n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 5, Into Turbine_______________[ W_c/m. ]__\n",
    "#_____________________________________________________________________\n",
    "p_5 = Q_(19.82795, 'MPa')\n",
    "T_5 = Q_(823.15, 'K')\n",
    "st_5 = State(substance, T=T_5, p=p_5)\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 6, Back into Regenerator 1._______________\n",
    "#_____________________________________________________________________\n",
    "p_6 = Q_(7.90116, 'MPa')\n",
    "T_6 = Q_(713.44, 'K')\n",
    "st_6 = State(substance, T=T_6, p=p_6)\n",
    "#___s_________________________________________________________________ Line\n",
    "#___s______State 6s, Back into Regenerator 1. with irrevsibilities____\n",
    "#___s_________________________________________________________________\n",
    "#Use Turbine is Adiabatic: s_5 = s_6s\n",
    "st_6s = State(substance, p=p_6, s=st_5.s)\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 7, Back into Regenerator 2._______________\n",
    "#_____________________________________________________________________\n",
    "p_7 = Q_(7.81421, 'MPa')\n",
    "T_7 = Q_(441.49, 'K')\n",
    "st_7 = State(substance, T=T_7, p=p_7)\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________State 8, Split _________[ to HE and Comp2 ]_____\n",
    "#_____________________________________________________________________\n",
    "T_8 = Q_(342.74, 'K')\n",
    "st_8 = State(substance, T=T_8, p=p_1) #from 8 to 1 constant pressure\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________Work Calculations ______________________________\n",
    "#_____________________________________________________________________\n",
    "\n",
    "Wd_cyc = Q_(85.5,'kJ/kg') #Given work output by the cycle. \n",
    "Qd_in = (st_5.h-st_4.h).to('kJ/kg') #Qdot_in/mdot\n",
    "Qd_out_md = (st_8.h-st_1.h).to('kJ/kg')\n",
    "Wd_t_md = (st_5.h-st_6.h).to('kJ/kg')      #TextBook Page 550\n",
    "Wd_c_md = ((st_2s.h-st_1.h)+(st_3s.h-st_8.h)).to('kJ/kg') #Page 551 of Text\n",
    "print('(Qdot_in/mdot)    = {}'.format(Qd_in))\n",
    "print('(Qdot_out/mdot)   = {}'.format(Qd_out_md))\n",
    "print('WTurbine/mdot     = {}'.format(Wd_t_md))\n",
    "print('WCompressors/mdot = {}'.format(Wd_c_md))\n",
    "print('           ')\n",
    "#_____________________________________________________________________ Line\n",
    "#_______________________Back Work Ratio ______________________________\n",
    "#_____________________________________________________________________\n",
    "BWR = (Wd_c_md/Wd_t_md).to('percent') \n",
    "print('BWR               = {}'.format(BWR))\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________Mass Flow Calculations _________________________\n",
    "#_____________________________________________________________________\n",
    "y=((st_3.h-st_8.h)/(st_2.h-st_1.h)) #Comfirmed with TA Lauren. y=mdot_2/mdot_1\n",
    "ym = y-1\n",
    "#mdot = \n",
    "print('(y)              = {}'.format(y))\n",
    "print('(y-1)            = {}'.format(ym))\n",
    "#print('mdot             = {}'.format(mdot))\n",
    "print('           ')\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________η Efficiency Calculations ______________________\n",
    "#_____________________________________________________________________\n",
    "η_reg1 = ((st_4.h-st_3.h)/(st_6.h-st_3.h)).to('percent') \n",
    "print('η_regen1= {}'.format(η_reg1))\n",
    "η_reg2 = ((st_3.h-st_2.h)/(st_7.h-st_2.h)).to('percent') \n",
    "print('η_regen2= {}'.format(η_reg2))\n",
    "η_reg = (((η_reg1+η_reg2)/2)).to('percent') \n",
    "print('η_regen= {}'.format(η_reg))\n",
    "print('           ')\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________η Efficiency Calculations ______________________\n",
    "#_____________________________________________________________________\n",
    "Wt = (st_5.h-st_6.h).to('kJ/kg')\n",
    "Etat = (Wt/(st_5.h-st_6s.h)).to('percent')\n",
    "Wc = ((st_2.h-st_1.h)+(st_3.h-st_2.h)).to('kJ/kg')\n",
    "Etac = (Wc/((st_2s.h-st_1.h)+(st_3s.h-st_2.h))).to('percent')\n",
    "Qin = (st_5.h-st_4.h).to('kJ/kg')\n",
    "print('TubrineWork    = {}'.format(Wt))\n",
    "print('TotCompWork    = {}'.format(Wc))\n",
    "print('Heat in        = {}'.format(Qin))\n",
    "eta = (((st_2.h-st_1.h)+(st_3.h-st_2.h))/(st_5.h-st_4.h)).to('percent')\n",
    "print('η             = {}'.format(eta))\n",
    "eta2 = (((st_2s.h-st_1.h)+(st_3s.h-st_2s.h))/(st_5s.h-st_4.h)).to('percent')\n",
    "print('η_s           = {}'.format(eta2))\n",
    "print('η_t Wt/Wt_s   = {}'.format(Etat))\n",
    "print('η_t Wc/Wc_s   = {}'.format(Etac))\n",
    "#_____________________________________________________________________ Line\n",
    "#_____________________η Efficiency Calculations ______________________\n",
    "#_____________________________________________________________________\n",
    "\n",
    "\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.0"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
